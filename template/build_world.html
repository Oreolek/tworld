{% extends "base.html" %}

{% block page_title %}
Building: {{ worldname }}
{% end %}

{% block head_ext %}
<link rel="stylesheet" href="{{ static_url('css/build.css') }}" type="text/css">
<link rel="stylesheet" href="{{ static_url('css/jquery-ui.css') }}" type="text/css">
<script src="{{ static_url('js/jquery-1.9.1.js') }}" type="text/javascript"></script>
<script src="{{ static_url('js/ui/1.10.3/jquery-ui.js') }}" type="text/javascript"></script>
<script src="{{ static_url('js/jquery.contextMenu.js') }}" type="text/javascript"></script>
<script src="{{ static_url('js/jquery.autosize.js') }}" type="text/javascript"></script>
<script src="{{ static_url('js/build.js') }}" type="text/javascript"></script>

<script type="text/javascript">
/* Which page is this? Cheap way of telling build.js. */
var pageid = 'world';
var pageworldid = "{{wid}}";
var pagelocid = null;
/* List of locations in this world. */
var db_locations = {% raw locarray %};
/* List of default realm-level properties. */
var db_world_props = {% raw worldproparray %};
/* List of default player-scope properties. */
var db_player_props = {% raw playerproparray %};
/* Form verification token. (Tornado checks this against a cookie.) */
var xsrf_token = "{{ xsrf_token }}";
</script>
{% end %}

{% block body %}

<div class="BuildBar">
<span class="BuildBarItem"><a href="/build">Worlds</a></span>
<span class="BuildBarSep">&#x2013;</span>
<span class="BuildBarItem"><a href="/build/world/{{wid}}">{{ worldname }}</a></span>
<span class="BuildBarSep">&#x2013;</span>
<span class="BuildBarItem"><a id="build_location_menu" href="#"><span style="color: #884">&#x25BE;</span> (select location)</a></span>
</div>

<h3 class="BuildSectionHead">Realm properties</h3>

<div class="BuildPropTableBox">
 <table id="build_world_properties" class="BuildPropTable" cellspacing="0">
 <colgroup><col width="30%"><col width="70%"></colgroup>
 </table>
</div>

<h3 class="BuildSectionHead">Default player properties</h3>

<div class="BuildPropTableBox">
 <table id="build_player_properties" class="BuildPropTable" cellspacing="0">
 <colgroup><col width="30%"><col width="70%"></colgroup>
 </table>
</div>

<h3 class="BuildSectionHead">Locations</h3>

<div class="BuildPropTableBox">
 <table class="BuildPropTable" cellspacing="0">
 <colgroup><col width="30%"><col width="70%"></colgroup>
 {% for loc in locations %}
  <tr>
   <td><a href="/build/loc/{{ loc['_id'] }}">{{ loc['key'] }}</a></td>
   <td><a href="/build/loc/{{ loc['_id'] }}">{{ loc['name'] }}</a></td>
  </tr>
 {% end %}
 </table>
</div>

{% end %}
